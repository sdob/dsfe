<div class="profile mdl-color--grey-100 mdl-color-text--grey-700">
    <div>
        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <header class="mdl-cell mdl-cell--3-col">
                <i class="material-icons">person</i>
            </header>
            <div class="mdl-card mdl-cell mdl-cell--9-col">
                <div class="mdl-card__supporting-text">
                    <h3>{{ pcvm.user.name }}</h3>
                    <span>Member since {{ pcvm.user.date_joined | date }}</span>
                    <div>Dives logged: {{ pcvm.user.dives.length }}</div>
                    <div>Divesites created: {{ pcvm.user.divesites.length }}</div>
                </div>
            </div>
        </section>

        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <div class="mdl-card mdl-cell mdl-cell--12-col">
                <div class="mdl-card__supporting-text">
                    <h4 class="mdl-cell mdl-cell--12-col">Recent activity</h2>
                    <div class="mdl-cell mdl-cell--12-col"
                        ng-repeat="activity in pcvm.recentActivity"
                        >
                        {{ pcvm.user.name }} {{ activity.dive ? 'logged a dive' : 'created a divesite'}}
                        {{ activity.creation_date | date }}
                        <div ng-if="activity.dive">
                            <a ng-href="#/divesites/{{activity.dive.divesite.id}}">{{ activity.dive.divesite.name }}</a>
                        </div>
                        <div ng-if="activity.divesite">
                            <a ng-href="#/divesites/{{activity.divesite.id}}">{{ activity.divesite.name }}</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <div class="mdl-card mdl-cell mdl-cell--12-col mdl-tabs mdl-js-tabs">
                <div class="mdl-card__title mdl-grid">
                    <div class="mdl-tabs__tab-bar mdl-cell--12-col">
                        <a class="mdl-tabs__tab is-active" href="#tab-dive-list">Dives logged</a>
                        <a class="mdl-tabs__tab" href="#tab-divesite-list">Divesites added</a>
                    </div>
                </div>
                <div class="mdl-card__supporting-text">
                    <div class="mdl-tabs__panel is-active"
                        id="tab-dive-list">
                        <div class="mdl-grid">
                            <div class="mdl-cell mdl-cell--12-col"
                                ng-if="!pcvm.user.dives"> None yet!</div>
                            <div
                                class="mdl-cell mdl-cell--12-col mdl-card profile__logged-dive"
                                ng-if="!!pcvm.user.dives"
                                ng-repeat="dive in pcvm.user.dives | orderBy:'-'">
                                <div class="mdl-card__title">
                                    <div class="mdl-card__title-text"> {{ dive.divesite.name }}</div>
                                </div>
                                <div class="mdl-card__supporting-text">
                                    <div> {{ dive.start_time | date }} </div>
                                    <div> {{ dive.duration  | duration }} minutes </div>
                                    <div> {{ dive.depth | number:1 }} </div>
                                    <div ng-if="dive.comment"> {{ dive.comment }} </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdl-tabs__panel"
                    id="tab-divesite-list">
                    <div class="mdl-grid">
                        <div class="mdl-cell mdl-cell--12-col"
                            ng-if="!pcvm.user.divesites">None yet!</div>
                        <div
                            ng-repeat="divesite in pcvm.user.divesites | orderBy:'-'"
                            class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp"
                            ng-if="!!pcvm.user.divesites"
                            ng-style="{background: 'url(' + divesite.header_image_url + ') center / cover'}"
                            >
                            <div class="mdl-card__title has-header-image">
                                <h2 class="mdl-card__title-text">
                                    <a ng-href="#/divesites/{{divesite.id}}/">{{ divesite.name }}</a>
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
