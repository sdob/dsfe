<div class="information-card shadow-2dp" ng-show="icvm.visible">
    <div class="information-card__title" ng-class="{'has-header-image': !!icvm.site.headerImageUrl}"
        ng-style="icvm.backgroundStyle"
        >
        <div class="information-card__site-title">
            <h2 class="information-card__site-name">
                {{ icvm.site.name }}
            </h2>
            <h3 class="information-card__site-owner">
                Added by <a href="/#/users/{{icvm.site.owner.id}}/">{{ icvm.site.owner.name }}</a>
            </h3>
        </div>
    </div>

    <div class="information-card__header-actions">
        <a href
            class="overlay-action-item"
            ng-click="icvm.dismiss()">
            <span class="fa fa-stack">
                <i class="fa fa-stack-2x fa-circle background"></i>
                <i class="fa fa-stack-1x fa-times"></i>
            </span>
        </a>
    </div>

    <div>
        <div class="information-card__site-coordinates">
            <div class="information-card__site-coordinate">
                {{ icvm.site.latitude }} ° N
            </div>
            <div class="information-card__site-coordinate">
                {{ icvm.site.longitude }} ° E
            </div>
        </div>

        <div class="information-card__site-description">
            {{ icvm.site.description }}
        </div>

        <div class="information-card__charts">
            <div class="information-card__chart">
                <a class="collapse-header"
                    id="js-information-card__depth-chart-toggle"
                    data-toggle="collapse"
                    data-target="#information-card__depth-collapse">
                    <div class="collapse-header__text">
                        Average maximum depth: {{ icvm.site.depth | number:0 }} m
                    </div>
                    <span
                        ng-if="icvm.site.depth"
                        class="collapse-header__chevron fa fa-chevron-down"></span>
                </a>
                <div
                    ng-show="icvm.site.dives.length"
                    class="collapse"
                    id="information-card__depth-collapse">
                    <div class="">
                        <div
                            class="information-card-chart-container"
                            id="information-card-depth-histogram-container"
                            style="height: 200px"
                            >
                        </div>
                    </div>
                </div>
            </div>
            <div class="information-card__chart">
                <a href class="collapse-header"
                    id="js-information-card__duration-chart-toggle"
                    data-toggle="collapse"
                    data-target="#information-card__duration-collapse">
                    <div class="collapse-header__text">
                        Average dive duration: {{ icvm.site.duration }} min.
                    </div>
                    <span
                        ng-if="icvm.site.duration"
                        class="collapse-header__chevron fa fa-chevron-down"></span>
                </a>
                <div
                    ng-show="icvm.site.dives.length"
                    class="collapse"
                    id="information-card__duration-collapse">
                    <div class="">
                        <div
                            class="information-card-chart-container"
                            id="information-card-duration-histogram-container"
                            style="height: 200px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <nearby-slipways slipways="icvm.site.nearbySlipways"></nearby-slipways>


        <information-card-actions></information-card-actions>
    </div> <!-- end of actions bar -->

    <div ng-if="icvm.site.images.length" class="information-card__divesite-images">
        <h3 class="divesite-images__title">Pictures</h3>
        <div class="information-card__divesite-image-container">
            <a
                href
                ng-click="icvm.showBiggerImage(img)"
                ng-repeat="img in icvm.site.images"
                class="information-card__divesite-image"
                >
                <img ng-src="{{img.transformedUrl}}" />
            </a>
        </div>
    </div> <!-- end of image thumbs -->


    <div class="information-card__dive-list">
        <h3 class="dive-list__title">Dives</h3>

        <div class="information-card__dive" ng-repeat="dive in icvm.site.dives | orderBy:'-'"
            editable="{{dive.diver.id == icvm.userId}}"
            >
            <div class="information-card__dive-header">
                <div class="information-card__dive-image">
                    <!-- width and height seemt to need hard-coding -->
                    <img
                    height="60" width="60"
                    ng-src="{{ dive.diver.profileImageUrl }}"
                    />
                </div>
                <!-- </div> -->
            <div class="information-card__dive-details">
                <div class="">
                    <a href="/#/users/{{dive.diver.id}}/">{{ dive.diver.name }}</a>
                </div>
                <div class="">
                    {{ dive.start_time | date:'d MMM yyyy' }}
                    at
                    {{ dive.start_time | date:'HH:mm' }}
                </div>
                <span class="">{{ dive.depth }} m</span>
                <span class="">{{ dive.duration | duration }} minutes</span>
                <a
                    href
                    ng-if="dive.diver.id == icvm.userId"
                    class="information-card__edit-this-dive"
                    >
                    <span class="fa fa-fw fa-pencil-square"></span>
                </a>
            </div>
        </div>
        <div class="information-card__dive-comment">
            {{ dive.comment }}
        </div>
    </div>
</div>
